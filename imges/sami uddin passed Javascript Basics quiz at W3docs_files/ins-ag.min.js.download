(()=>{"use strict";var t={486:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Engagement=void 0;var s=e(569);i.Engagement=s.default},569:function(t,i,e){var s=this&&this.__spreadArrays||function(){for(var t=0,i=0,e=arguments.length;i<e;i++)t+=arguments[i].length;var s=Array(t),n=0;for(i=0;i<e;i++)for(var o=arguments[i],r=0,h=o.length;r<h;r++,n++)s[n]=o[r];return s};Object.defineProperty(i,"__esModule",{value:!0});var n=e(502),o=function(){function t(t){this._velocities=[],this._listeners=[],this._isSubscribed=!1,this._timeoffset=t||Date.now(),this._outOfFocusTime=0,this._hiddenTime=0,this._pageHeight=this.getPageHeight(),this._windowHeight=this.getWindowHeight(),this._lastScrollingDistance=this.getScrollingDistance(),this._maxScrollDepthPercentage=this.getMaxScrollDepth(),this._lastVelocityReportTime=Date.now()}return t.prototype.subscribe=function(){this._isSubscribed||(this._isSubscribed=!0,this.initScrollListener(),this.initVisibilityChangeListener(),this.initVelocityListener(),this.initResizeListener())},t.prototype.unsubscribe=function(){this._isSubscribed&&(this._listeners.forEach((function(t){window.removeEventListener(t.eventName,t.eventHandler)})),clearInterval(this._velocityInterval),this._listeners=[],this._isSubscribed=!1)},t.get=function(i){return t._instance||(t._instance=new t(i)),t._instance},t.prototype.getData=function(){return{max_depth_percentage:this._maxScrollDepthPercentage,screen_length:this.getScreenLength(),time_on_page:this.getTimeOnPage(),velocity_excluding_static_time:this.getAverageVelocity(n.VelocityType.EXCLUDE_STATIC_USER),velocity_including_static_time:this.getAverageVelocity(n.VelocityType.INCLUDE_STATIC_USER),page_load_time:this.getPageLoadTime()}},t.prototype.getPageLoadTime=function(){try{var t=window.performance.getEntriesByType("navigation")[0];if("complete"===document.readyState&&t&&t.loadEventEnd>0&&t.domContentLoadedEventStart>0)return Math.floor(Math.abs(t.loadEventEnd-t.domContentLoadedEventStart))}catch(t){}return-1},t.prototype.getScreenLength=function(){return window.screen.availHeight||window.screen.height},t.prototype.initResizeListener=function(){var t=this,i=function(){t._pageHeight=t.getPageHeight(),t._windowHeight=t.getWindowHeight()};this._listeners.push({eventName:"resize",eventHandler:i}),window.addEventListener("resize",i)},t.prototype.initScrollListener=function(){var t=this,i=this.throttle((function(){t._maxScrollDepthPercentage=t.getMaxScrollDepth()}),1e3);this._listeners.push({eventName:"scroll",eventHandler:i}),window.addEventListener("scroll",i)},t.prototype.initVisibilityChangeListener=function(){var t=this,i=function(){"hidden"===window.document.visibilityState?t._hiddenTime=Date.now():t._hiddenTime>0&&(t._outOfFocusTime=t._outOfFocusTime+(Date.now()-t._hiddenTime))};this._listeners.push({eventName:"visibilitychange",eventHandler:i}),window.addEventListener("visibilitychange",i)},t.prototype.initVelocityListener=function(){var t=this;this._velocityInterval||(this._velocityInterval=setInterval((function(){t._velocities.push(t.getMomentVelocity())}),1e3))},t.prototype.getMaxScrollDepth=function(){this._pageHeight=this.getPageHeight(),this._windowHeight=this.getWindowHeight();var t=this.getScrollDepthPercentages(),i=this._maxScrollDepthPercentage||0;return Math.max(i,t)},t.prototype.getScrollDepthPercentages=function(){var t=this.getScrollingDistance(),i=this._pageHeight;return Math.round(t/i*100)},t.prototype.getScrollingDistance=function(){return this.getPageYOffset()+this._windowHeight},t.prototype.getPageYOffset=function(){return window.pageYOffset||window.scrollY},t.prototype.getWindowHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},t.prototype.getPageHeight=function(){var t,i;return Math.floor(Math.max(null===(t=window.document.body)||void 0===t?void 0:t.scrollHeight,null===(i=window.document.body)||void 0===i?void 0:i.offsetHeight,window.document.documentElement.clientHeight,window.document.documentElement.scrollHeight,window.document.documentElement.offsetHeight))},t.prototype.getTimeOnPage=function(){var t=(Date.now()-this._timeoffset)/1e3,i=this._outOfFocusTime/1e3;return Number((t-i).toFixed(2))},t.prototype.getAverageVelocity=function(t){var i=s(this._velocities);t===n.VelocityType.EXCLUDE_STATIC_USER&&(i=i.filter(Number));var e=i.reduce((function(t,i){return t+i}),0);return i.length>0?e/i.length:-1},t.prototype.getMomentVelocity=function(){var t=Date.now(),i=this.getScrollingDistance()-this._lastScrollingDistance,e=(t-this._lastVelocityReportTime)/1e3;return this._lastVelocityReportTime=t,this._lastScrollingDistance=this.getScrollingDistance(),!i?0:Math.round(Math.abs(i/e))},t.prototype.getTitlesText=function(){var t=[];return document.querySelectorAll("h1").forEach((function(i){t.push(i.innerText.trim().replace(/_/g,"-"))})),t.length?t.join("_"):void 0},t.prototype.getDescriptionText=function(){var t=[];return document.querySelectorAll("meta[name='description'],meta[property='og:description']").forEach((function(i){t.push(i.content.trim().replace(/_/g,"-"))})),t.length?t.join("_"):void 0},t.prototype.throttle=function(t,i){var e=Date.now();return function(){e+i-Date.now()<0&&(t(),e=Date.now())}},t}();i.default=o},502:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.VelocityType=void 0,function(t){t.EXCLUDE_STATIC_USER="exclude_static_user",t.INCLUDE_STATIC_USER="include_static_user"}(i.VelocityType||(i.VelocityType={}))},301:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WebVitals=void 0;var s=e(340);Object.defineProperty(i,"WebVitals",{enumerable:!0,get:function(){return s.WebVitals}})},340:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WebVitals=void 0;var e=function(){function t(t,i){this.webVitalsData={pv:t,url:i}}return t.prototype.getData=function(){return this.webVitalsData},t.prototype.measure=function(){var t=this;this.getInstance().then((function(i){i.onLCP(t.collectWebVitals.bind(t)),i.onCLS(t.collectWebVitals.bind(t)),i.onINP(t.collectWebVitals.bind(t))}))},t.prototype.collectWebVitals=function(t){var i=this.prepareDataFields(t),e=i.name.toLowerCase();this.webVitalsData[e]=i.value},t.prototype.getInstance=function(){return new Promise((function(t){if(window.brw_webVitals)t(window.brw_webVitals);else{var i=document.createElement("script");i.src="//cdn.browsiprod.com/web-vitals/web-vitals-4.2.3.js",i.onload=function(){t(window.brw_webVitals)},document.head.appendChild(i)}}))},t.prototype.prepareDataFields=function(t){var i=t.name,e=t.value;return{name:i,value:e="number"==typeof e?+e.toFixed(3):e}},t}();i.WebVitals=e},145:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0});const s=e(486),n=e(301),o=e(439),r=e(892),h=e(279),c=e(566),a=e(503),d=e(226),u=e(685),l=e(942);class v{constructor(){this.intersectionHandlers=[],this.campaignIdsMap={},this.foldsTouchesMap={},this.timeInViewMap={},this.refreshRateMap={}}static get(){return v._instance||(this._instance=new v),v._instance}init(t,i){this.device=i,this.isExplorerSource=t.sc===r.SourceCollector.EXPLORER,l.default.start(),this.initSummaryEvents(),this.initTouchListener(),this.webVitals=new n.WebVitals(t.atid,encodeURIComponent(a.default.getPageUrl())),this.webVitals.measure(),this.initExplorerFunction(t.efn)}collectCampaignIds(t){const{placementId:i,refreshCount:e}=t,s=this.getCampaignIds(t.element);s&&Object.keys(s).length&&(this.campaignIdsMap[i]=this.campaignIdsMap[i]||{},this.campaignIdsMap[i][e]=this.campaignIdsMap[i][e]||{},this.campaignIdsMap[i][e]=s)}handleNewAd(t){this.collectTimeInView(t),this.collectRefreshRate(t)}handleRefreshedAd(t){this.stopCollectingTimeInView(t),this.stopCollectingRefreshRate(t)}collectTimeInView(t){if(this.isExplorerSource)return;const i=new u.default(t.element,.5,[1e3,2e3,5e3,1e4,15e3,2e4,25e3,3e4],(i=>{const e=i/1e3,{placementId:s,refreshCount:n}=t;this.timeInViewMap[s]=this.timeInViewMap[s]||{},this.timeInViewMap[s][n]=this.timeInViewMap[s][n]||{mtiv:0},this.timeInViewMap[s][n].mtiv=Math.max(this.timeInViewMap[s][n].mtiv,e)}));this.intersectionHandlers.push({element:t.element,observer:i}),i.observe()}stopCollectingTimeInView(t){if(this.isExplorerSource)return;const i=this.intersectionHandlers.find((i=>i.element===t.element));i&&(i.observer.clearObserver(),this.intersectionHandlers=this.intersectionHandlers.filter((i=>i.element!==t.element)))}collectRefreshRate(t){const{placementId:i,refreshCount:e}=t;this.refreshRateMap[i]=this.refreshRateMap[i]||{},this.refreshRateMap[i][e]={initialTime:Date.now()}}stopCollectingRefreshRate(t){var i;const{placementId:e,refreshCount:s}=t,n=null===(i=this.refreshRateMap[e])||void 0===i?void 0:i[s];n&&(n.timeDiff=(Date.now()-n.initialTime)/1e3)}getWebVitalsData(){var t;return null===(t=this.webVitals)||void 0===t?void 0:t.getData()}getEngagementData(){const t=s.Engagement.get().getData();return{pageLoadTime:t.page_load_time,timeOnPage:t.time_on_page,velocity:t.velocity_including_static_time,maxScrollDepthPercentage:t.max_depth_percentage}}getPlacementsData(){const t=l.default.getFoundAds(),i=h.PrebidJs.get().getWinningBids;return null==t?void 0:t.map((t=>{var e,s,n,o,r,h;const{element:c,refreshCount:d,size:u}=t,{w:l,h:v}=u||a.default.getElementSize(c),w=t.placementId,m=a.default.getElementFoldNumber(c),g=a.default.getElementPosition(c).y,f=this.getFrameType(c),b=this.foldsTouchesMap[m]||0,p=(null===(e=this.campaignIdsMap[w])||void 0===e?void 0:e[d])||this.getCampaignIds(c),O=(null===(n=null===(s=this.timeInViewMap[w])||void 0===s?void 0:s[d])||void 0===n?void 0:n.mtiv)||0,_=d>0?null===(r=null===(o=this.refreshRateMap[w])||void 0===o?void 0:o[d-1])||void 0===r?void 0:r.timeDiff:void 0,{instanceName:j,cpm:y,advertiserDomains:D}=(null===(h=i[w])||void 0===h?void 0:h[d])||{};return Object.assign({placementId:w,refreshCount:d,refreshRate:_,height:v,width:l,fold:m,adLocation:g,frameType:f,touches:b,timeInView:O,cpm:y,advertiserDomains:D,instanceName:j},p)}))}getFrameType(t){const i=t.querySelector("iframe");if(i)return a.default.isFriendlyIframe(i)?o.FrameType.IFRAME:o.FrameType.SAFE_FRAME}getCampaignIds(t){const i=t.querySelector("iframe");return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(null==i?void 0:i.iid)?{impressionId:i.iid}:{}),(null==i?void 0:i.cid)?{creativeId:i.cid}:{}),(null==i?void 0:i.ayid)?{agencyId:i.ayid}:{}),(null==i?void 0:i.cnid)?{campaignId:i.cnid}:{}),(null==i?void 0:i.id)?{iframeId:i.id}:{})}getImgData(){const t=Array.from(document.querySelectorAll("img"));return this.getElementsSummary(t)}getTextElementsData(){const t=Array.from(document.querySelectorAll("p"));return this.getElementsSummary(t)}getAdsData(){const t=l.default.getFoundAds(),i=null==t?void 0:t.filter((t=>0===t.refreshCount)).map((t=>t.element)),e=this.getElementsSummary(i,!1,!1),s=t.filter((t=>{var i,e;return(null===(e=null===(i=this.timeInViewMap[t.placementId])||void 0===i?void 0:i[t.refreshCount])||void 0===e?void 0:e.mtiv)>=2}));return Object.assign({viewedAdsCount:s.length},e)}getElementsSummary(t,i=!0,e=!0){let s=0,n=0;return{count:t.filter((t=>{if(e&&!a.default.isVisible(t,!0))return!1;const{w:o,h:r}=a.default.getElementSize(t);return!(i&&o<=5&&r<=5)&&(s+=o*r,n+=r,!0)})).length,totalSize:s,totalHeight:n}}initSummaryEvents(){d.default.instance.subscribe((t=>{if(t){const t=c.default.get();t.sendPageSummaryEvent(),t.sendPlacementSummaryEvent()}}))}initTouchListener(){this.isExplorerSource||"desktop"===this.device||window.addEventListener("touchstart",(t=>{Array.from(t.changedTouches).forEach((t=>{const i=a.default.getFoldNumberByDistance(t.pageY);this.foldsTouchesMap[i]=this.foldsTouchesMap[i]||0,this.foldsTouchesMap[i]++}))}))}initExplorerFunction(t){this.isExplorerSource&&t&&(window[t]=()=>new Promise((t=>{const i=c.default.get();i.sendPageSummaryEvent(),i.sendPlacementSummaryEvent(),t()})))}}i.default=v},942:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0});const s=e(145),n=e(972),o=e(503),r=e(932);class h{constructor(){this.foundAds=[],this.logger=new n.default("Dfp Detector"),this.googletag=window.googletag||{},this.googletag.cmd=this.googletag.cmd||[],this.foundAds=[]}static start(){this.instance||(this.instance=new h,this.instance.run())}static getFoundAds(){return this.instance.foundAds}run(){this.listenToLazyAds(),this.listenToSlotsOnLoad(),this.checkFetchedSlots()}checkFetchedSlots(){this.checkCurrentSlots(),setTimeout((()=>this.checkCurrentSlots()),1e3)}checkCurrentSlots(){this.logger.verbose("checking current slots"),this.googletag.cmd.push((()=>{var t,i,e;(null===(e=null===(i=(t=this.googletag).pubads)||void 0===i?void 0:i.call(t))||void 0===e?void 0:e.getSlots()).forEach((t=>{const i=t.getSlotElementId(),e=document.getElementById(i);if(e&&t.getResponseInformation()){const t=this.validateSlot(e);if(t.status===r.SlotValidStatus.VALID)return void this.addFoundAd(e,e.id,t.size);if(t.status===r.SlotValidStatus.LAZY)return void this.handleThirdPartySlowAdRendering(e)}}))}))}validateSlot(t){const i=this.resolveInnerMostSingleChild(t),e=o.default.getElementSize(i);return this.isDetectedAlready(t)?{status:r.SlotValidStatus.REFRESH}:this.isRendered(i,e)?{status:r.SlotValidStatus.VALID,size:e}:{status:r.SlotValidStatus.LAZY}}isRendered(t,i){return o.default.isVisibleNew(t)&&o.default.isValidSize(i)}listenToLazyAds(){this.googletag.cmd.push((()=>{var t,i,e;null===(e=null===(i=(t=this.googletag).pubads)||void 0===i?void 0:i.call(t))||void 0===e||e.addEventListener("slotRenderEnded",(t=>{if(!t.isEmpty){const i=t.slot.getSlotElementId(),e=document.getElementById(i);if(e){const t=this.validateSlot(e);if(t.status===r.SlotValidStatus.VALID)return void this.addFoundAd(e,i,t.size);if(t.status===r.SlotValidStatus.LAZY)return void this.handleThirdPartySlowAdRendering(e);t.status===r.SlotValidStatus.REFRESH&&this.addFoundAd(e,i,t.size,!0)}}}))}))}handleThirdPartySlowAdRendering(t){this.waitForDeflating(t).then((i=>{this.addFoundAd(t,t.id,i)})).catch((t=>{}))}resolveAdSize(t){let i,e=t;for(;1===(i=this.getNonScriptChildren(e)).length;)e=i[0];return o.default.getElementSize(e)}resolveInnerMostSingleChild(t){let i,e=t;for(;1===(i=this.getNonScriptChildren(e)).length;)e=i[0];return e}getNonScriptChildren(t){return Array.from(t.children).filter((t=>"SCRIPT"!==t.tagName))}waitForDeflating(t){return new Promise(((i,e)=>{let s=10;const n=setInterval((()=>{const r=this.resolveAdSize(t);o.default.isValidSize(r)&&(clearInterval(n),i(r)),s--||(clearInterval(n),e(r))}),500)}))}isDetectedAlready(t){return!!o.default.isPositionedDisconnected(window.document.body,t)||(!!this.foundAds.some((i=>i.element===t))||(!!o.default.isDescendantElement(this.foundAds.map((t=>t.element)),t)||this.foundAds.some((i=>o.default.isDescendantElement([t],i.element)))))}addFoundAd(t,i,e,n){if(!n&&this.isDetectedAlready(t))return;const o=s.default.get(),r=this.getHighestRefreshAd(t),h={element:t,placementId:i,size:e,refreshCount:r?r.refreshCount+1:0};this.foundAds.push(h),this.logger.verbose("found ad:",t),r&&o.handleRefreshedAd(r),o.handleNewAd(h)}listenToSlotsOnLoad(){this.googletag.cmd.push((()=>{var t,i,e;null===(e=null===(i=(t=this.googletag).pubads)||void 0===i?void 0:i.call(t))||void 0===e||e.addEventListener("slotOnload",(t=>{const i=this.getHighestRefreshAd(void 0,t.slot.getSlotElementId());i&&setTimeout((()=>{s.default.get().collectCampaignIds(i)}),2500)}))}))}getHighestRefreshAd(t,i){const e=this.foundAds.filter((e=>t?e.element===t:!!i&&e.placementId===i));if(0!==e.length)return e.reduce(((t,i)=>i.refreshCount>t.refreshCount?i:t))}}i.default=h},566:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0});const s=e(972),n=e(503),o=e(145),r=e(445),h=e(876),c=e(892);class a{constructor(t){this.logger=new s.default("EventsService"),this.isExplorerSource=t.sc===c.SourceCollector.EXPLORER,this.staticData=t,this.commonFields=this.getCommonFields(),this.eventServerDomain=t.esd,this.dataCollector=o.default.get()}static get(t){return a._instance||(this._instance=new a(t)),a._instance}setDetectionData(t){this.commonFields=this.getCommonFields(t)}getTimeOffset(){return Date.now()-this.staticData.st}getTimeDelay(){const t=n.default.getDomInteractiveTime();return t?Date.now()-t:-1}getCommonFields(t){const i=this.staticData.sr||t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.isExplorerSource?{es:this.staticData.es,eid:this.staticData.eid}:{sid:this.staticData.sid,uid:this.staticData.uid}),{atid:this.staticData.atid,sc:this.staticData.sc,ver:this.staticData.v,url:encodeURIComponent(this.staticData.url),iru:!this.staticData.sid&&!!this.staticData.uid}),this.staticData.pvid?{pvid:this.staticData.pvid}:{}),(null==i?void 0:i.trafficSource)?{ts:i.trafficSource}:{}),(null==i?void 0:i.devicePlatform)?{dp:i.devicePlatform}:{}),(null==i?void 0:i.countryCode)?{geo:i.countryCode}:{}),(null==i?void 0:i.os)?{dos:i.os}:{}),(null==i?void 0:i.browser)?{db:i.browser}:{}),(null==i?void 0:i.city)?{ct:i.city}:{}),(null==i?void 0:i.region)?{st:i.region}:{})}getEventServerUrl(t){return`${this.eventServerDomain}/${t}`}buildFormattedEvent(t){return[Object.assign({events:t},this.commonFields)]}logEvent(t,i,e){this.logger.style(`%c[${this.logger.name}] ${t}/${i}`,"color: white; background-color: #084847; border-radius: 4px; font-size:16px; font-weight:bold; padding:2px;",e)}send(t,i,e){const s=this.buildFormattedEvent(e),n=new XMLHttpRequest;n.open("POST",this.getEventServerUrl(t),!0),n.send(JSON.stringify(s)),this.logEvent(t,i,s)}sendBeacon(t,i,e){try{const s=this.buildFormattedEvent(e);if(navigator.sendBeacon(this.getEventServerUrl(t),JSON.stringify(s)))return this.logEvent(t,i,s),!0}catch(t){return this.logger.verbose("failed sending events on beacon",event),!1}return!1}sendAgentHit(t){const i=this.getAgentHitEvent(t);this.send(r.EventTopic.A_PAGE,h.EventType.AGENT_HIT,[i])}sendAgentLoadedEvent(){const t=this.getAgentLoadedEvent();this.send(r.EventTopic.A_PAGE,h.EventType.AGENT_LOADED,[t])}sendPageSummaryEvent(){const t=this.getPageSummaryEvent();this.sendBeacon(r.EventTopic.A_PAGE,h.EventType.PAGE_SUMMARY,[t])||this.send(r.EventTopic.A_PAGE,h.EventType.PAGE_SUMMARY,[t])}sendPlacementSummaryEvent(){const t=this.getPlacementSummaryEvent();this.sendBeacon(r.EventTopic.A_PLACEMENT,h.EventType.PLACEMENT_SUMMARY,[t])||this.send(r.EventTopic.A_PLACEMENT,h.EventType.PLACEMENT_SUMMARY,[t])}getAgentHitEvent(t){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({et:h.EventType.AGENT_HIT,det:!!t,to:this.getTimeOffset(),td:this.getTimeDelay(),vph:n.default.getViewport().height,vpw:n.default.getViewport().width},this.staticData.iid?{iid:this.staticData.iid}:{}),this.staticData.cid?{cid:this.staticData.cid}:{}),this.staticData.ayid?{ayid:this.staticData.ayid}:{}),this.staticData.cnid?{cnid:this.staticData.cnid}:{}),t?{datid:t}:{})}getAgentLoadedEvent(){return{et:h.EventType.AGENT_LOADED,to:this.getTimeOffset()}}getPageSummaryEvent(){const t=this.dataCollector.getEngagementData(),i=this.dataCollector.getWebVitalsData(),e=this.dataCollector.getTextElementsData(),s=this.dataCollector.getImgData(),o=this.dataCollector.getAdsData();return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({et:h.EventType.PAGE_SUMMARY,to:this.getTimeOffset(),ieop:n.default.isDisplayEngineOnPage(),vph:n.default.getViewport().height,vpw:n.default.getViewport().width,ph:n.default.getGlobalPageHeight(),pw:n.default.getGlobalPageWidth(),plt:t.pageLoadTime,ic:s.count,tis:s.totalSize,tih:s.totalHeight,ac:o.count,vac:o.viewedAdsCount,tas:o.totalSize,tah:o.totalHeight,tec:e.count,ttes:e.totalSize,tth:e.totalHeight},(null==i?void 0:i.cls)?{cls:i.cls}:{}),(null==i?void 0:i.inp)?{inp:i.inp}:{}),(null==i?void 0:i.lcp)?{lcp:i.lcp}:{}),(null==t?void 0:t.pageLoadTime)?{plt:t.pageLoadTime}:{}),this.isExplorerSource?{}:{top:t.timeOnPage,sv:t.velocity,dep:t.maxScrollDepthPercentage})}getPlacementSummaryEvent(){const t=this.dataCollector.getPlacementsData();return{et:h.EventType.PLACEMENT_SUMMARY,to:this.getTimeOffset(),plc:t.map((t=>{var i;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({plid:t.placementId,rc:t.refreshCount,f:t.fold,h:t.height,w:t.width,ot:t.adLocation,ft:t.frameType},t.iframeId?{ifid:t.iframeId}:{}),t.impressionId?{iid:t.impressionId}:{}),t.creativeId?{cid:t.creativeId}:{}),t.agencyId?{ayid:t.agencyId}:{}),t.campaignId?{cnid:t.campaignId}:{}),this.isExplorerSource?{}:{mtiv:t.timeInView,tch:t.touches}),t.cpm?{br:t.cpm}:{}),t.advertiserDomains?{add:t.advertiserDomains}:{}),t.instanceName?{pi:t.instanceName}:{}),t.refreshRate?{rr:Number(null===(i=t.refreshRate)||void 0===i?void 0:i.toFixed(1))}:{})}))}}}i.default=a},226:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0});const s=e(972);class n{constructor(){this.callbacks=[],this.waitForFocus=[],this.logger=new s.default("FocusService"),this.isHidden="hidden"===document.visibilityState,this.logger.info(`focus on start. in focus: ${!this.isHidden}`),this.isSubscribed=!0,this.listenToVisibilityChange()}static get instance(){return this._instance||(this._instance=new n),this._instance}listenToVisibilityChange(){document.addEventListener("visibilitychange",(()=>{if(!this.isSubscribed)return;const t="hidden"===document.visibilityState;this.isHidden!==t&&(this.isHidden=t,this.fireCallbacks(t),t||this.fireWaitForFocus(),this.logger.info(`focus changed. in focus: ${!this.isHidden}`))}))}subscribe(t){this.callbacks.push(t)}fireCallbacks(t){this.callbacks.forEach((i=>{i(t)}))}fireWaitForFocus(){for(;this.waitForFocus.length;){const t=this.waitForFocus.shift();"function"==typeof t&&t()}}}i.default=n},685:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0});const s=e(972),n=e(226);i.default=class{constructor(t,i,e=[1e3],n,o,r,h,c=!0){this.timeouts=[],this.isInView=!1,this.logger=new s.default("IntersectionHandler"),this.element=t,this.threshold=i,this.rootMargin=o,e=Array.from(new Set(e)),this.breakpoints=e.sort(((t,i)=>t-i)),this.observer=this.initObserver(),this.callback=n,this.outOfThresholdCallback=r||(()=>{}),this.isContinuousObserver=!!h,this.shouldCheckMinSize=c}initObserver(){let t={threshold:[this.threshold,Math.max(0,this.threshold-.01)],rootMargin:this.rootMargin};return n.default.instance.subscribe((t=>{t?this.clearAllTimeouts():this.isInView&&this.setBreakpointsTimeouts()})),new IntersectionObserver(this.observationCallback.bind(this),t)}observe(){return this.logger.verbose("observe ",this.element,` for threshold of ${this.threshold} with breakpoint of ${this.breakpoints} and ${this.rootMargin||"no"} rootMargin`),this.observer.observe(this.element),new Promise((t=>{this.resolver=t}))}observationCallback(t){const i=t[0];i.intersectionRatio>=this.threshold&&this.isAboveMinimumSize(i.boundingClientRect.height)?(this.isInView=!0,this.setBreakpointsTimeouts()):(this.isInView=!1,this.clearAllTimeouts(),this.outOfThresholdCallback())}isAboveMinimumSize(t){return!this.shouldCheckMinSize||t>=5}setBreakpointsTimeouts(){const t=this.isContinuousObserver?[...this.breakpoints]:this.breakpoints;t.forEach((i=>{this.timeouts.push(setTimeout((()=>{const i=t.shift();this.callback(i),this.breakpoints.length||this.observationDone()}),i))}))}clearAllTimeouts(){this.timeouts.forEach((t=>{clearTimeout(t)}))}observationDone(){this.logger.info("All break points reached for element:",this.element),this.resolver(),this.clearObserver()}clearObserver(){this.logger.info("Stop observing",this.element),this.clearAllTimeouts(),this.observer.unobserve(this.element),this.observer.disconnect()}}},972:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LogType=void 0;const s=e(503);var n;!function(t){t[t.VERBOSE=0]="VERBOSE",t[t.INFO=1]="INFO",t[t.ERROR=2]="ERROR",t[t.LOG=3]="LOG"}(n=i.LogType||(i.LogType={}));i.default=class{constructor(t){if(this.loggerFallback=!1,this.name=t,this.active=!!s.default.getDebugConfig().debug,this.active){let t=window.console;if(!t.hasOwnProperty("debug")||!t.hasOwnProperty("info")||!t.hasOwnProperty("log")){let t=document.createElement("iframe");t.width="0",t.height="0",document.body.appendChild(t);let i=t.contentWindow;["debug","info","log"].forEach((t=>window.console[t]=i&&i.console[t]))}}}print(t,i){if(!this.active)return;const e=window.console,s=[],o="color: white; background-color: #084847; border-radius: 4px; padding-top: 1px; padding-bottom: 2px;",r=t=>{let n=s.concat(i);if(this.loggerFallback)return this.loggerWithArguments(t,n);try{e[t].apply(e,n)}catch(i){return this.loggerFallback=!0,this.loggerWithArguments(t,n)}};switch(t){case n.VERBOSE:s.push(`%c ins_agent %c[${this.name}]`,o,"color: gray;"),r("debug");break;case n.INFO:s.push(`%c ins_agent %c[${this.name}]`,o,"color: gray;"),r("info");break;case n.ERROR:s.push(`%c ins_agent %c[!] [${this.name}]`,o,"color: red;"),r("error");break;case n.LOG:r("log")}}loggerWithArguments(t,i){let e=`console.${t}(args)`,s=i.map(((t,i)=>`args[${i}]`));new Function("args",e.replace(/args/,s.join(",")))(i)}verbose(...t){this.print(n.VERBOSE,Array.prototype.slice.call(arguments))}info(...t){this.print(n.INFO,Array.prototype.slice.call(arguments))}error(...t){this.print(n.ERROR,Array.prototype.slice.call(arguments))}style(...t){this.print(n.LOG,Array.prototype.slice.call(arguments))}}},279:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PrebidJs=void 0;const s=e(972);class n{constructor(){this.pbjsInstances=[],this.winningBids={},this.logger=new s.default("Prebid")}init(){this.initializePbjsInstances(),0===this.pbjsInstances.length&&this.waitForPbjsInstances()}static get(){return this.instance||(this.instance=new n),this.instance}get getWinningBids(){return this.winningBids}initializePbjsInstances(){var t;const i=null===(t=window._pbjsGlobals)||void 0===t?void 0:t.filter((t=>!t.includes("PREBID_GLOBAL")));null==i||i.forEach((t=>{const i=window[t];i&&this.pbjsInstances.push({instance:i,name:t})})),this.initializeListeners()}waitForPbjsInstances(){setTimeout(this.initializePbjsInstances.bind(this),3e3)}initializeListeners(){this.pbjsInstances&&this.pbjsInstances.forEach((t=>{t.instance.onEvent("bidWon",this.onBidWon.bind(this,t.name))}))}onBidWon(t,i){if(!(null==i?void 0:i.adUnitCode))return;this.logger.verbose("bid won:",i);const{adUnitCode:e,cpm:s,meta:n}=i,o=this.winningBids[e]?Object.keys(this.winningBids[e]).length:0;this.winningBids[e]=this.winningBids[e]||{},this.winningBids[e][o]=this.winningBids[e][o]||{},this.winningBids[e][o]=Object.assign({instanceName:t,cpm:s},n.advertiserDomains?{advertiserDomains:n.advertiserDomains}:{})}}i.PrebidJs=n,n.instance=null},503:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0});class e{static getViewport(){return this.viewport||(this.viewport=e.calculateViewport()),this.viewport}static getDebugConfig(){const t=sessionStorage.getItem("__brins");let i={};return t&&(i=JSON.parse(t)),i}static getDetectedAgentId(){var t;try{return null===(t=window.instag)||void 0===t?void 0:t.alid}catch(t){}}static setDetectedAgentId(t){try{window.instag.alid=t}catch(t){}}static generateUUIDIfSupported(){return window.crypto&&window.crypto.randomUUID&&window.crypto.randomUUID()||""}static getCookie(t){const i=document.cookie.split(/\s*;\s*/).map((t=>{const i=t.split(/\s*=\s*/);if(2===(null==i?void 0:i.length))return{key:i[0],value:i[1]}})).find((i=>(null==i?void 0:i.key)===t));return i?i.value:""}static setCookie(t,i="",e=0,s="d"){let n=6e4;"d"===s&&(n*=1440);let o=new Date(+new Date+e*n);document.cookie=t+"="+i+"; expires="+o.toUTCString()+"; path=/"}static setLocalStorage(t,i){try{localStorage.setItem(t,i)}catch(t){}}static getLocalStorage(t){try{return window.localStorage.getItem(t)||""}catch(t){}return""}static setSessionStorage(t,i){sessionStorage[t]="string"==typeof i?i:JSON.stringify(i)}static getSessionStorage(t){let i;try{i=sessionStorage.getItem(t)}catch(t){}return i||""}static toUrlParams(t){return Object.keys(t).map((i=>i+"="+("object"==typeof t[i]?encodeURIComponent(JSON.stringify(t[i])):encodeURIComponent(t[i])))).join("&")}static xhrPromise(t){return new Promise(((i,e)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.onreadystatechange=function(){s.readyState==(s.DONE||4)&&(s.status>=200&&s.status<300?i(s):e(s.status))},s.send()}))}static isObject(t){return t&&"object"==typeof t&&!Array.isArray(t)}static mergeDeep(t,i){if(this.isObject(t)&&this.isObject(i))for(const e in i)!i.hasOwnProperty(e)||!this.isObject(i[e])||i[e]instanceof Node?Object.assign(t,{[e]:i[e]}):(t[e]||Object.assign(t,{[e]:{}}),this.mergeDeep(t[e],i[e]));return t}static getPageUrl(){return`${window.document.location.protocol}//${window.document.location.host}${window.document.location.pathname}`}static getPageHeight(){const t=window.document.body,i=window.document.documentElement;return Math.floor(Math.max(null==t?void 0:t.scrollHeight,null==t?void 0:t.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight))}static getPageWidth(){const t=window.document.documentElement;return Math.floor(Math.max(t.clientWidth,t.scrollWidth,t.offsetWidth))}static getFoldNumberByDistance(t){return Math.floor(t/this.getViewport().height)+1}static calculateViewport(){let t={width:0,height:0};return void 0!==window.innerWidth?(t.width=window.innerWidth,t.height=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth&&(t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight),t.area=t.height&&t.width?t.height*t.width:0,t}static isVisible(t,i){let e=window.getComputedStyle(t),s=!i||this.isElementVisible(t);return!!e&&(s&&"visible"===e.getPropertyValue("visibility")&&"none"!==e.getPropertyValue("display")&&"0"!==e.getPropertyValue("opacity"))}static isElementVisible(t){let i=t.getBoundingClientRect();return i.top>=0&&i.right<=window.innerWidth&&i.bottom<=this.getPageHeight()&&i.left>=0&&i.height>0||this.isElementInBodyBoundary(t)}static isElementInBodyBoundary(t){let i=t.offsetTop,e=t.offsetLeft,s=t.offsetParent;const n=t.offsetWidth,o=t.offsetHeight;for(;s;)i+=s.offsetTop,e+=s.offsetLeft,s=s.offsetParent;const r=window.document.body,h=r.offsetTop,c=r.offsetLeft,a=r.offsetWidth;return i>=h&&e>=c&&n<=a&&o>0}static getElementSize(t){let i=t.getBoundingClientRect();return{w:i.width,h:i.height}}static getElementFoldNumber(t){return Math.floor(this.getElementPosition(t).y/this.getViewport().height)+1}static getElementPosition(t){let i={y:-1,x:-1};return t&&this.isElement(t)?(i=this.getPosition(t),i):i}static isElement(t){return t instanceof Element}static getPosition(t,i=!1){let e=t.getBoundingClientRect(),s=document.body,n=document.documentElement,o=i?window.pageYOffset||n.scrollTop||s.scrollTop:this.getPageYOffset(),r=window.pageXOffset||n.scrollLeft||s.scrollLeft,h=n.clientTop||s.clientTop||0,c=n.clientLeft||s.clientLeft||0,a=e.top+o-h,d=e.left+r-c;return{y:Math.round(a),x:Math.round(d)}}static getPageYOffset(){return window.pageYOffset||("CSS1Compat"===document.compatMode?document.documentElement.scrollTop:document.body.scrollTop)}static isFluidSize(t){return 0===t.w&&0===t.h}static isValidSize(t,i=!1){return i&&this.isFluidSize(t)||t.w>5&&t.h>5}static isVisibleNew(t){return this.isCssVisible(t)&&this.isInPageBoundaries(t)}static isCssVisible(t){let i=window.getComputedStyle(t);return!!i&&("visible"===i.getPropertyValue("visibility")&&"none"!==i.getPropertyValue("display")&&"0"!==i.getPropertyValue("opacity"))}static isInPageBoundaries(t){const i=t.getBoundingClientRect(),e=i.width*i.height,s=this.getVisibleArea(i);return e>0&&s/e>=.15}static getVisibleArea(t){const i=this.getGlobalPageWidth(),e=this.getGlobalPageHeight(),s=t.left+window.scrollX,n=t.right+window.scrollX,o=t.bottom+window.scrollY,r=t.top+window.scrollY;if(s>window.innerWidth||n<0||o<0||r>e)return 0;let h=t.width;s<0&&(h-=Math.abs(s)),n>i&&(h-=n-i);let c=t.height;return r<0&&(c-=Math.abs(r)),o>e&&(c-=o),h*c}static getGlobalPageWidth(){return Math.max(window.document.body.scrollWidth,window.document.body.offsetWidth,window.document.documentElement.scrollWidth,window.document.documentElement.offsetWidth,window.document.documentElement.clientWidth)}static getGlobalPageHeight(){var t,i;return Math.floor(Math.max(null===(t=window.document.body)||void 0===t?void 0:t.scrollHeight,null===(i=window.document.body)||void 0===i?void 0:i.offsetHeight,window.document.documentElement.clientHeight,window.document.documentElement.scrollHeight,window.document.documentElement.offsetHeight))}static isFixed(t){if(t&&t!==document.body){if("fixed"===window.getComputedStyle(t).position)return{status:!0,element:t};return t.parentElement?this.isFixed(t.parentElement):{status:!1}}return{status:!1}}static isPositionedDisconnected(t,i){return!!i&&!!(t.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_DISCONNECTED)}static isDescendantElement(t,i){for(let e of t)if(e.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return!0;return!1}static isDisplayEngineOnPage(){return!!document.getElementById("browsi-tag")}static isFriendlyIframe(t){let i=+new Date+""+Math.random();try{let e=t.contentWindow;return!!e&&(e[i]="asd","asd"===e[i])}catch(t){return!1}}static getDomInteractiveTime(){const t=performance.getEntriesByType("navigation")[0];if(t){const i=performance.timeOrigin+t.domInteractive;return Math.floor(i)}return-1}}i.default=e},932:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SlotValidStatus=void 0,function(t){t[t.VALID=0]="VALID",t[t.LAZY=1]="LAZY",t[t.REFRESH=2]="REFRESH"}(i.SlotValidStatus||(i.SlotValidStatus={}))},439:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FrameType=void 0,function(t){t.IFRAME="iframe",t.SAFE_FRAME="safeFrame"}(i.FrameType||(i.FrameType={}))},892:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExplorerSource=i.SourceCollector=void 0,function(t){t.BPT="bootstrap",t.CREATIVE="in_creative",t.EXPLORER="explorer"}(i.SourceCollector||(i.SourceCollector={})),function(t){t.PRESET="preset",t.CREATIVE="in_creative"}(i.ExplorerSource||(i.ExplorerSource={}))},445:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EventTopic=void 0,function(t){t.A_PAGE="a_page",t.A_PLACEMENT="a_placement"}(i.EventTopic||(i.EventTopic={}))},876:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EventType=void 0,function(t){t.AGENT_HIT="ag_hit",t.AGENT_LOADED="ag_loaded",t.PAGE_SUMMARY="page_summary",t.PLACEMENT_SUMMARY="placement_summary"}(i.EventType||(i.EventType={}))}},i={};function e(s){var n=i[s];if(void 0!==n)return n.exports;var o=i[s]={exports:{}};return t[s].call(o.exports,o,o.exports,e),o.exports}(()=>{const t=e(486),i=e(279),s=e(503),n=e(972),o=e(566),r=e(145);(new class{constructor(){this.logger=new n.default("app"),this.staticData=this.getStaticData(),this.initTag(),this.startTime=this.getStartTime(),t.Engagement.get(this.startTime).subscribe(),i.PrebidJs.get().init()}run(){const t=s.default.getDetectedAgentId();t?o.default.get(this.staticData).sendAgentHit(t):(s.default.setDetectedAgentId(this.staticData.atid),o.default.get(this.staticData).sendAgentHit(),this.getDetection().then((t=>this.startAgent(t))))}getStartTime(){var t;return(null===(t=window.instag)||void 0===t?void 0:t.st)||this.staticData.st||+new Date}initTag(){var t;window["instag"]||(window.instag={}),(t=window.instag)["st"]||(t.st=this.getStartTime())}getTagData(){let t;try{t=document.currentScript||document.getElementById("ins-tag")}catch(t){}if(!t)throw new Error("no tag");return{sc:t.sc,st:t.st,es:t.es,eid:t.eid,efn:t.efn,pvid:t.pvid,iid:t.iid,cid:t.cid,cnid:t.cnid,ayid:t.ayid,sr:t.sr}}getSessionIdAndUserId(){let t,i;return t=s.default.getCookie("__binsSID"),i=s.default.getLocalStorage("__binsUID")||s.default.getCookie("__binsUID"),t||(t=s.default.generateUUIDIfSupported(),s.default.setCookie("__binsSID",t,30,"m")),i||(i=s.default.generateUUIDIfSupported(),s.default.setCookie("__binsUID",i,365,"d"),s.default.setLocalStorage("__binsUID",i)),{sid:t,uid:i}}getStaticData(){const{sid:t,uid:i}=this.getSessionIdAndUserId();return Object.assign({sh:"//dd.insiad.com/geodevicedetect",esd:"//events.insiad.com/events/v2",v:String("1.3.64"),st:this.startTime,url:s.default.getPageUrl(),atid:s.default.generateUUIDIfSupported(),sid:t,uid:i},this.getTagData())}getDetection(){return new Promise(((t,i)=>{if(this.staticData.sr)t(this.staticData.sr);else{const i=Object.assign({userAgent:navigator.userAgent},document.referrer?{referrerUrl:document.referrer}:{}),e=`${this.staticData.sh}/?${s.default.toUrlParams(i)}`;s.default.xhrPromise(e).then((i=>{if(200===i.status){const e=JSON.parse(i.responseText);e&&!e.error&&t(e)}})).catch((t=>this.logger.error("Error in detection request:",t)))}}))}startAgent(t){const i=o.default.get();i.setDetectionData(t),i.sendAgentLoadedEvent(),r.default.get().init(this.staticData,t.devicePlatform)}}).run()})()})();